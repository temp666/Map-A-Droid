{% extends "base.html" %}

{% block header %}
{% endblock %}

{% block scripts %}
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/fixedheader/3.1.5/js/dataTables.fixedHeader.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {

            var displayResources = $('#show-data');

            displayResources.text('Loading data ...');

            $.ajax({
                type: "GET",
                url: "/near_gym?lat={{ lat }}&lon={{ lon }}",
                success: function (result) {
                    console.log(result);
                    var output = "<table><thead><tr><th>Name</th><th>Hashpic</th><th>Distance</th><th>Match</th></thead><tbody>";
                    for (var i in result) {
                        output += "<tr><td>" + result[i].name + "<br><br>Gym-ID: " + result[i].id + "</td><td><img src='" + result[i].filename + "' width=100></td><td>" + result[i].dist + "</td><td><a href='modify_gym_hash?hash={{ hash }}&id=" + result[i].id + "'>Match to this Gym</a> </td></tr>";
                    }
                    output += "</tbody></table>";

                    displayResources.html(output);
                    $("table").addClass("table");
                    $('table').DataTable({
                        responsive: {{ responsive }},
                        "order": [[2, "asc"]],
                        "autoWidth": true
                    });
                }
            });
        });
    </script>
{% endblock %}

{% block content %}
    <center>
        <h1>Modify existing Gym</h1>
        <h4><a href="/gyms">Back to Gyms</a></h4>
    </center>
    <div id="show-data"></div>
{% endblock %}